(()=>{"use strict";let t="rus";window.addEventListener("beforeunload",(function(){localStorage.setItem("lang",t)})),window.addEventListener("load",(function(){localStorage.getItem("lang")&&T(localStorage.getItem("lang"))}));const e=[[192,1105],[49,[33,49]],[50,[34,50]],[51,[8470,51]],[52,[59,52]],[53,[37,53]],[54,[58,54]],[55,[63,55]],[56,[42,56]],[57,[40,57]],[48,[41,48]],[189,[95,45]],[187,[43,61]],["Backspace","Backspace"],["Tab","Tab"],[81,1081],[87,1094],[69,1091],[82,1082],[84,1077],[89,1085],[85,1075],[73,1096],[79,1097],[80,1079],[219,1093],[221,1098],["Delete","Del"],["CapsLock","Caps"],[65,1092],[83,1099],[68,1074],[70,1072],[71,1087],[72,1088],[74,1086],[75,1083],[76,1076],[186,1078],[222,1101],[220,92],["Enter","Enter"],["ShiftLeft","ShiftL"],[90,1103],[88,1095],[67,1089],[86,1084],[66,1080],[78,1090],[77,1100],[188,1073],[190,1102],[191,46],["ShiftRight","ShiftR"],["ControlLeft","CtrlL"],["MetaLeft","Win"],["AltLeft","AltL"],["Space","&nbsp;"],["AltRight","AltR"],["ControlRight","CtrlR"]],n=[[192,96],[49,[33,49]],[50,[64,50]],[51,[35,51]],[52,[36,52]],[53,[37,53]],[54,[94,54]],[55,[38,55]],[56,[42,56]],[57,[40,57]],[48,[41,48]],[189,[95,45]],[187,[43,61]],["Backspace","Backspace"],["Tab","Tab"],[81,113],[87,119],[69,101],[82,114],[84,116],[89,121],[85,117],[73,105],[79,111],[80,112],[219,91],[221,93],["Delete","Del"],["CapsLock","Caps"],[65,97],[83,115],[68,100],[70,102],[71,103],[72,104],[74,106],[75,107],[76,108],[186,59],[222,39],[220,92],["Enter","Enter"],["ShiftLeft","ShiftL"],[90,122],[88,120],[67,99],[86,118],[66,98],[78,110],[77,109],[188,44],[190,46],[191,47],["ShiftRight","ShiftR"],["ControlLeft","CtrlL"],["MetaLeft","Win"],["AltLeft","AltL"],["Space","&nbsp;"],["AltRight","AltR"],["ControlRight","CtrlR"]],o=document.body,s=document.createElement("div");s.classList.add("wrapper"),o.append(s);const c=document.createElement("header");c.classList.add("text-block"),s.append(c);const a=document.createElement("h1");a.innerHTML="Virtual Keyboard",a.classList.add("title"),c.append(a);const i=document.createElement("textarea");i.classList.add("text-block__textarea"),c.append(i);const r=document.createElement("main");r.classList.add("keyboard"),s.append(r);const l=document.createElement("footer");l.classList.add("footer"),s.append(l);const d=document.createElement("p");d.innerHTML="To switch the language, the combination is: left alt + left Shift.",d.classList.add("footer-p"),l.append(d);const u=document.createElement("p");u.innerHTML="The keyboard was created in the Windows operating system.",u.classList.add("footer-p"),l.append(u);let L=[];"rus"===t&&(L=e),"en"===t&&(L=n);const p=["",["ArrowUp",8593],"",["ArrowLeft",8592],["ArrowDown",8595],["ArrowRight",8594]],S={Backspace:"Backspace",Tab:"Tab",Delete:"Del",CapsLock:"Caps",ShiftLeft:"ShiftL",ShiftRight:"ShiftR",ControlLeft:"CtrlL",MetaLeft:"Win",AltLeft:"AltL",Space:"&nbsp;",AltRight:"AltR",ControlRight:"CtrlR",Enter:"Enter",ArrowUp:"8593",ArrowLeft:"8592",ArrowDown:"8595",ArrowRight:"8594"};let f=0,C=!1,_=!1,b=i.selectionStart;for(let t=0;t<5;t++){let e=14;3===t&&(e=12),4===t&&(e=7);for(let n=0;n<e;n++){const e=document.createElement("div");if(e.classList.add("button-key"),e.classList.add(`button__i-${t}__j-${n}`),r.append(e),4===t&&6===n){let t=0;for(;t<6;){const n=document.createElement("div");if(n.classList.add("button-key"),n.classList.add(`button__i-${t}__Arrow`),e.append(n),"object"==typeof p[t]){const e=document.createElement("span");e.classList.add("button-key__span"),n.dataset.id=p[t][0],e.innerHTML=String.fromCharCode(Number(p[t][1])),n.append(e)}t++}}else{const t=document.createElement("span");if(t.classList.add("button-key__span"),"number"==typeof L[f][1]&&(t.classList.add("button-key__span__letter"),e.dataset.id=L[f][0],t.innerHTML=String.fromCharCode(Number(L[f][1]))),"string"==typeof L[f][1]&&(e.dataset.id=L[f][0],t.innerHTML=String(L[f][1])),"object"==typeof L[f][1]){const n=document.createElement("span");n.classList.add("button-key__spanUp"),n.innerHTML=String.fromCharCode(Number(L[f][1][0])),e.append(n),e.dataset.id=L[f][0],t.innerHTML=String.fromCharCode(Number(L[f][1][1]))}e.append(t),f++}}}const y=document.querySelectorAll(".button-key__span__letter"),m=document.querySelector('.button-key[data-id="192"] .button-key__span'),k=document.querySelector('.button-key[data-id="188"] .button-key__span'),h=document.querySelector('.button-key[data-id="190"] .button-key__span'),g=document.querySelector('.button-key[data-id="191"] .button-key__span'),x=document.querySelectorAll(".button-key");function T(t){const o=document.querySelectorAll(".button-key__span"),s=document.querySelectorAll(".button-key__spanUp");let c=[];"rus"===t&&(c=n),"en"===t&&(c=e),localStorage.setItem("lang",t);for(let t=0;t<o.length&&("number"==typeof c[t][1]&&(o[t].innerHTML=String.fromCharCode(Number(c[t][1]))),"object"==typeof c[t][1]&&(s[t-1].innerHTML=String.fromCharCode(Number(c[t][1][0])),o[t].innerHTML=String.fromCharCode(Number(c[t][1][1]))),"CtrlR"!==o[t].innerHTML);t++);}function M(e){let n,o;if(e.target.classList.contains("button-key__spanUp")?(n=document.querySelector(".button-key__span").classList.contains("capslock")?e.path[1].children[0].textContent:e.path[1].children[1].textContent,o=e.path[1]):e.target.classList.contains("button-key__span")?(n=document.querySelector(".button-key__span").classList.contains("capslock")?e.path[1].children[0].textContent:e.target.textContent,o=e.path[1]):e.target.children[0].classList.contains("button-key__span")?(n=e.target.children[0].textContent,o=e.target):(n=document.querySelector(".button-key__span").classList.contains("capslock")?e.target.children[0].textContent:e.target.children[1].textContent,o=e.target),o.classList.add("active_button"),Object.values(S).includes(n)){if("AltL"!==n&&"AltR"!==n||o.classList.toggle("active_button_shift"),"ShiftL"===n||"ShiftR"===n){const e=document.querySelector(".button__i-4__j-2"),n=document.querySelector(".button__i-4__j-4");if(e.classList.contains("active_button_shift")||n.classList.contains("active_button_shift")){let e=t;"rus"===e?t="en":"en"===e&&(t="rus"),T(t)}else o.classList.toggle("active_button_shift"),y.forEach((function(t){t.classList.toggle("capslock")})),"rus"===t&&(o.classList.contains("active_button_shift")?(m.innerHTML="~",k.innerHTML="<",h.innerHTML=">",g.innerHTML="?"):(m.innerHTML="`",k.innerHTML=",",h.innerHTML=".",g.innerHTML="/"))}"Caps"===n&&(y.forEach((function(t){t.classList.toggle("capslock")})),"rus"===t&&(document.querySelector(".button-key__span").classList.contains("capslock")?(m.innerHTML="~",k.innerHTML="<",h.innerHTML=">",g.innerHTML="?"):(m.innerHTML="`",k.innerHTML=",",h.innerHTML=".",g.innerHTML="/"))),"Backspace"===n&&(0===i.selectionStart&&i.textContent?i.textContent=i.textContent.slice(0,-1):(b=i.selectionStart,i.textContent=i.textContent.slice(0,i.selectionStart-1)+i.textContent.slice(i.selectionStart),i.selectionStart=b-1)),"Del"===n&&(b=i.selectionStart,i.textContent=i.textContent.slice(0,i.selectionStart)+i.textContent.slice(i.selectionStart+1),i.selectionStart=b),"Enter"===n&&(b=i.selectionStart,i.textContent=i.textContent.slice(0,i.selectionStart)+"\n"+i.textContent.slice(i.selectionStart),i.selectionStart=b+1),"Tab"===n&&(b=i.selectionStart,i.textContent=i.textContent.slice(0,i.selectionStart)+"\t"+i.textContent.slice(i.selectionStart),i.selectionStart=b+1),"&nbsp;"===n&&(b=i.selectionStart,i.textContent=i.textContent.slice(0,i.selectionStart)+" "+i.textContent.slice(i.selectionStart),i.selectionStart=b+1)}else{b=i.selectionStart;let t=n;document.querySelector(".button-key__span").classList.contains("capslock")&&(t=t.toUpperCase()),i.textContent=i.textContent.slice(0,i.selectionStart)+t+i.textContent.slice(i.selectionStart),i.selectionStart=b+1}}function w(e){if(e.preventDefault(),S[`${e.code}`]){if(document.querySelector(`.button-key[data-id="${e.code}"]`).classList.add("active_button"),"AltLeft"!==e.code&&"AltRight"!==e.code||(_=!0),"CapsLock"===e.code&&(y.forEach((function(t){t.classList.toggle("capslock")})),"rus"===t&&(document.querySelector(".button-key__span").classList.contains("capslock")?(m.innerHTML="~",k.innerHTML="<",h.innerHTML=">",g.innerHTML="?"):(m.innerHTML="`",k.innerHTML=",",h.innerHTML=".",g.innerHTML="/")),window.removeEventListener("keydown",w)),"Backspace"===e.code&&(0===i.selectionStart&&i.textContent?i.textContent=i.textContent.slice(0,-1):(b=i.selectionStart,i.textContent=i.textContent.slice(0,i.selectionStart-1)+i.textContent.slice(i.selectionStart),i.selectionStart=b-1)),"Delete"===e.code&&(b=i.selectionStart,i.textContent=i.textContent.slice(0,i.selectionStart)+i.textContent.slice(i.selectionStart+1),i.selectionStart=b),"Enter"===e.code&&(b=i.selectionStart,i.textContent=i.textContent.slice(0,i.selectionStart)+"\n"+i.textContent.slice(i.selectionStart),i.selectionStart=b+1),"Tab"===e.code&&(b=i.selectionStart,i.textContent=i.textContent.slice(0,i.selectionStart)+"\t"+i.textContent.slice(i.selectionStart),i.selectionStart=b+1),"Space"===e.code&&(b=i.selectionStart,i.textContent=i.textContent.slice(0,i.selectionStart)+" "+i.textContent.slice(i.selectionStart),i.selectionStart=b+1),"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||C||(y.forEach((function(t){t.classList.toggle("capslock")})),"rus"===t&&(m.innerHTML="~",k.innerHTML="<",h.innerHTML=">",g.innerHTML="?"),document.querySelector(`.button-key[data-id="${e.code}"]`).classList.add("active_button_shift"),C=!0,_&&function(e){if("ShiftLeft"===e.code||"ShiftRight"===e.code){document.querySelector(`.button-key[data-id="${e.code}"]`).classList.add("active_button");let n=t;"rus"===n?t="en":"en"===n&&(t="rus"),window.removeEventListener("keydown",w),T(t)}else window.removeEventListener("keydown",w);_=!1}(e)),"ArrowUp"===e.code||"ArrowLeft"===e.code||"ArrowDown"===e.code||"ArrowRight"===e.code){let t=document.querySelector(`.button-key[data-id="${e.code}"] .button-key__span`);b=i.selectionStart;let n=t.textContent;i.textContent=i.textContent.slice(0,i.selectionStart)+n+i.textContent.slice(i.selectionStart),i.selectionStart=b+1}}else if(C){let t="";t=document.querySelector(`.button-key[data-id="${e.keyCode}"] .button-key__spanUp`)||document.querySelector(`.button-key[data-id="${e.keyCode}"] .button-key__span`);let n=t.textContent;t.classList.contains("capslock")&&(n=n.toUpperCase()),b=i.selectionStart,i.textContent=i.textContent.slice(0,i.selectionStart)+n+i.textContent.slice(i.selectionStart),i.selectionStart=b+1}else{document.querySelector(`.button-key[data-id="${e.keyCode}"]`).classList.add("active_button");let t=document.querySelector(`.button-key[data-id="${e.keyCode}"] .button-key__span`);b=i.selectionStart;let n=t.textContent;t.classList.contains("capslock")&&(n=n.toUpperCase()),i.textContent=i.textContent.slice(0,i.selectionStart)+n+i.textContent.slice(i.selectionStart),i.selectionStart=b+1}}window.addEventListener("keydown",w),window.addEventListener("keyup",(function(e){document.querySelectorAll(".button-key").forEach((function(t){t.classList.remove("active_button")})),window.addEventListener("keydown",w),"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||(C=!1,y.forEach((function(t){t.classList.toggle("capslock")})),"rus"===t&&(m.innerHTML="`",k.innerHTML=",",h.innerHTML=".",g.innerHTML="/"),document.querySelector(`.button-key[data-id="${e.code}"]`).classList.remove("active_button_shift"))})),i.addEventListener("focus",(function(){b=i.selectionStart})),i.addEventListener("blur",(function(t){window.addEventListener("keydown",w),t.preventDefault()}),!1),x.forEach((t=>{t.classList.contains("button__i-4__j-6")||(t.addEventListener("mousedown",M),t.addEventListener("mouseup",(function(){t.classList.remove("active_button")})))}))})();